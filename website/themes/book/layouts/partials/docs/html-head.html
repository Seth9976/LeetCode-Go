<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="{{- .Summary -}}">
<meta name="theme-color" content="#FFFFFF">
{{- if .Site.Params.BookPortableLinks -}}
  {{- template "portable-link" . -}}
{{- end -}}
<title>{{ partial "docs/title" . }} | {{ .Site.Title }}</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="{{ "favicon.png" | relURL }}" type="image/x-icon">
{{- $styles := resources.Get "book.scss" | resources.ToCSS | resources.Minify | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}">
{{- if default true .Site.Params.BookSearch }}
  {{- $searchJSFile := printf "%s.search.js" .Language.Lang }}
  {{- $searchJS := resources.Get "search.js" | resources.ExecuteAsTemplate $searchJSFile . | resources.Minify | resources.Fingerprint }}
  <script defer src="{{ $searchJS.RelPermalink }}" integrity="{{ $searchJS.Data.Integrity }}"></script>
{{ end -}}
{{- if .Site.Params.BookServiceWorker }}
  {{- $swJS := resources.Get "serviceworker-v1.js" | resources.Minify | resources.Fingerprint }}
  <script async>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register("{{ $swJS.RelPermalink }}").then(function() {
        if (navigator.serviceWorker.controller) {
          console.log('Assets cached by the controlling service worker.');
        } else {
          console.log('Please reload this page to allow the service worker to handle network operations.');
        }
      }).catch(function(error) {
        console.log('ERROR: ' + error);
      });
    } else {
      console.log('Service workers are not supported in the current browser.');
    }
  </script>
{{ end -}}
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

{{- template "_internal/google_analytics.html" . -}}

{{- with .OutputFormats.Get "rss" -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end -}}
{{ "" | safeHTML }}
